---
# Kayobe Kolla configuration.

###############################################################################
# Kolla installation.

# Type of Kolla control installation. One of 'binary' or 'source'.
#kolla_ctl_install_type: source

# Path to directory for kolla source code checkout.
#kolla_source_path:

# URL of Kolla source code repository if type is 'source'.
kolla_source_url: https://github.com/RSE-Cambridge/kolla

# Version (branch, tag, etc.) of Kolla source code repository if type is
# 'source'.
kolla_source_version: refs/tags/cumulus/7.0.1.2

# Path to virtualenv in which to install kolla.
#kolla_venv:

# Path in which to generate kolla configuration.
#kolla_build_config_path:

###############################################################################
# Kolla-ansible installation.

# Type of Kolla-ansible control installation. One of 'binary' or 'source'.
kolla_ansible_ctl_install_type: source

# Path to directory for kolla-ansible source code checkout.
#kolla_ansible_source_path:

# URL of Kolla Ansible source code repository if type is 'source'.
kolla_ansible_source_url: https://github.com/RSE-Cambridge/kolla-ansible

# Version (branch, tag, etc.) of Kolla Ansible source code repository if type
# is 'source'.
kolla_ansible_source_version: refs/tags/cumulus/7.0.1.2

# Path to virtualenv in which to install kolla-ansible.
#kolla_ansible_venv:

# Extra requirements to install inside the kolla-ansible virtualenv.
#kolla_ansible_venv_extra_requirements:

# Path to Kolla-ansible configuration directory.
#kolla_config_path:

# Path to Kolla-ansible node custom configuration directory.
#kolla_node_custom_config_path:

###############################################################################
# Kolla configuration.

# Kolla base container image distribution.
#kolla_base_distro:

# Kolla installation type: binary or source.
#kolla_install_type:

# URL of docker registry to use for Kolla images.
kolla_docker_registry: "{{ docker_registry }}"

# Docker namespace to use for Kolla images.
kolla_docker_namespace: rse-cambridge

# Username to use to access a docker registry.
#kolla_docker_registry_username:

# Password to use to access a docker registry.
#kolla_docker_registry_password:

# Kolla OpenStack release version. This should be a Docker image tag.
kolla_openstack_release: 7.0.1.2

# Dict mapping names of sources to their definitions for
# kolla_install_type=source. See kolla.common.config for details.
# Example:
# kolla_sources:
#   ironic_base:
#     type: git
#     location: https://github.com/openstack/ironic
#     reference: master
#kolla_sources:

###############################################################################
# Kolla image build configuration.

# Dict mapping Jinja2 block names in kolla's Docker images to their contents.
#kolla_build_blocks:
kolla_build_blocks:
  ironic_inspector_footer: |
    # Install our custom inspector plugins.
    RUN pip install stackhpc-inspector-plugins==1.1.1
  manila_share_footer: |
    # Update the ceph volume client to mimic, due to obsolete mds commands
    RUN cp /usr/lib/python2.7/site-packages/ceph_volume_client.py /usr/lib/python2.7/site-packages/ceph_volume_client.py.old
    RUN curl https://raw.githubusercontent.com/ceph/ceph/mimic/src/pybind/ceph_volume_client.py -o /usr/lib/python2.7/site-packages/ceph_volume_client.py
  magnum_api_footer: |
    RUN pip install -U --no-deps git+https://github.com/RSE-Cambridge/magnum@stable/rocky
  magnum_conductor_footer: |
    RUN pip install -U --no-deps git+https://github.com/RSE-Cambridge/magnum@stable/rocky
  keystone_footer: |
    RUN pip install -U --no-deps git+https://github.com/RSE-Cambridge/keystone@stable/rocky

# Dict mapping image customization variable names to their values.
# Each variable takes the form:
# <image name>_<customization>_<operation>
# Hyphens in the image name are replaced with underscores. The customization is
# most commonly packages. The operation should be one of override, append or
# remove. The value should be a list.
kolla_build_customizations:
  ironic_inspector_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'       
  magnum_base_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'
  keystone_base_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'
    # Allow use of OpenID connecto for federation
    - 'mod_auth_openidc'
  neutron_server_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'

###############################################################################
# Kolla-ansible inventory configuration.

# Full custom seed inventory contents.
#kolla_seed_inventory_custom:

# Custom overcloud inventory containing a mapping from top level groups to
# hosts.
#kolla_overcloud_inventory_custom_top_level:

# Custom overcloud inventory containing a mapping from components to top level
# groups.
#kolla_overcloud_inventory_custom_components:
kolla_overcloud_inventory_custom_components: "{{ lookup('template', kayobe_config_path ~ '/kolla/inventory/overcloud-components.j2') }}"

# Custom overcloud inventory containing a mapping from services to components.
#kolla_overcloud_inventory_custom_services:

# Full custom overcloud inventory contents. By default this will be the
# concatenation of the top level, component, and service inventories.
#kolla_overcloud_inventory_custom:

# Dict mapping from kolla-ansible groups to kayobe groups and variables. Each
# item is a dict with the following items:
# * groups: A list of kayobe ansible groups to map to this kolla-ansible group.
# * vars: A dict mapping variable names to values for hosts in this
#         kolla-ansible group.
#kolla_overcloud_inventory_top_level_group_map:

# List of names of top level kolla-ansible groups. Any of these groups which
# have no hosts mapped to them will be provided with an empty group definition.
#kolla_overcloud_inventory_kolla_top_level_groups:

###############################################################################
# Kolla-ansible configuration.

# Virtualenv directory where Kolla-ansible's ansible modules will execute
# remotely on the target nodes. If None, no virtualenv will be used.
#kolla_ansible_target_venv:

# Whether TLS is enabled for the external API endpoints.
kolla_enable_tls_external: True

# Whether debug logging is enabled.
#kolla_openstack_logging_debug:

# Upper constraints file for installation of Kolla.
#kolla_upper_constraints_file:

# User account to use for Kolla SSH access.
#kolla_ansible_user:

# Primary group of Kolla SSH user.
#kolla_ansible_group:

# Whether to use privilege escalation for all operations performed via Kolla
# Ansible.
#kolla_ansible_become:

###############################################################################
# Kolla feature flag configuration.

#kolla_enable_aodh:
#kolla_enable_barbican:
#kolla_enable_blazar:
#kolla_enable_cadf_notifications:
#kolla_enable_ceilometer:
kolla_enable_central_logging: True
kolla_enable_ceph: False
#kolla_enable_ceph_mds:
#kolla_enable_ceph_nfs:
#kolla_enable_ceph_rgw:
kolla_enable_cinder: True
#kolla_enable_cinder_backend_hnas_iscsi:
#kolla_enable_cinder_backend_hnas_nfs:
#kolla_enable_cinder_backend_iscsi:
#kolla_enable_cinder_backend_lvm:
#kolla_enable_cinder_backend_nfs:
#kolla_enable_cinder_backend_zfssa_iscsi:
#kolla_enable_cloudkitty:
#kolla_enable_congress:
#kolla_enable_designate:
#kolla_enable_etcd:
#kolla_enable_fluentd:
#kolla_enable_freezer:
#kolla_enable_gnocchi:
kolla_enable_grafana: True
#kolla_enable_haproxy:
kolla_enable_heat: True
kolla_enable_horizon: True
#kolla_enable_influxdb:
kolla_enable_ironic: False
#kolla_enable_ironic_ipxe:
#kolla_enable_ironic_pxe_uefi:
#kolla_enable_iscsid:
#kolla_enable_karbor:
#kolla_enable_kuryr:
kolla_enable_magnum: True
kolla_enable_manila: True
#kolla_enable_manila_backend_generic:
#kolla_enable_manila_backend_hnas:
kolla_enable_manila_backend_cephfs_native: True
kolla_enable_manila_backend_cephfs_nfs: True
#kolla_enable_mistral:
#kolla_enable_monasca:
#kolla_enable_mongodb:
#kolla_enable_multipathd:
#kolla_enable_murano:
kolla_enable_neutron_agent_ha: True
#kolla_enable_neutron_bgp_dragent:
#kolla_enable_neutron_dvr:
#kolla_enable_neutron_fwaas:
#kolla_enable_neutron_lbaas:
kolla_enable_neutron_provider_networks: True
#kolla_enable_neutron_qos:
#kolla_enable_neutron_segments:
#kolla_enable_neutron_sriov:
#kolla_enable_neutron_vpnaas:
#kolla_enable_nova_serialconsole_proxy:
#kolla_enable_octavia:
#kolla_enable_osprofiler:
#kolla_enable_panko:
kolla_enable_prometheus: True
#kolla_enable_qdrouterd:
#kolla_enable_rally:
#kolla_enable_sahara:
#kolla_enable_searchlight:
#kolla_enable_senlin:
#kolla_enable_skydive:
#kolla_enable_solum:
#kolla_enable_storm:
#kolla_enable_swift:
#kolla_enable_tacker:
#kolla_enable_telegraf:
#kolla_enable_tempest:
#kolla_enable_trove:
#kolla_enable_vitrage:
#kolla_enable_vmtp:
#kolla_enable_watcher:
#kolla_enable_zun:

###############################################################################
# Passwords and credentials.

# Dictionary containing default custom passwords to add or override in the
# Kolla passwords file.
#kolla_ansible_default_custom_passwords:

# Dictionary containing custom passwords to add or override in the Kolla
# passwords file.
#kolla_ansible_custom_passwords:

###############################################################################
# TLS certificate bundle management

# Optionally copy a TLS certificate bundle into place.
#
# When enabled, this will copy the contents of kolla_tls_cert into place for
# use by HAproxy.
#
# Note that this should be formatted as a literal style block scalar.
kolla_tls_cert: "{{ secrets_kolla_tls_cert }}"
asdf_kolla_tls_cert: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31303462613131363563363166353863383837656163323638353065626631613661363966356364
          6336393936353562306636346130366663323034356162380a666563653566393465643535323561
          39333663633432316330373133623735313664336363643661663635663338643335373035343731
          3030303566316433330a396564393062313031633061333666396433646436303636663438343036
          34366537373662313437363262306165613234306366656435646632333730303561393137613732
          31343038326134346563363037626263363736656166663938613163316564663365326639373237
          63623461376630326463623766666333646666633435633537343534326566323538393462363761
          65383539326531383732636333353232316465663033326339383065393362313265666232643232
          61353130393830643433656435363862323263366563336637323333376239373437326461653664
          33306532666562356234626230666633346430613638343839623965616636353264643761633665
          39633331306232323635333466396134386365386234633466363039313637633234396165396536
          38393061656332326465633763316630636265613238313265303961383735346563376265306163
          35623934353838376331656465343961353537333133306433626539633231663031323130643062
          35613862653431636461376235373832343133313564383233356533306335616636633634373734
          36626630623732373063623736633663323361613832666261366436326139343366363066353361
          33646133616362653235656266653035313836643764666537363965333532636537353564393931
          33626132663163303639633838366634323336326630343361306264316636306666613832663330
          32636164343632353062633265666139666132393366343765313164373738666333353466616134
          65636335663964343339663166386433396461383431356636626430303662366435363030383239
          63623762646463626661626361376163376530386463643934333038316665343163353436303335
          31306639383861356665646463643931393734306230336534323130333537646661376139376563
          65626634353866396563306166653637653631366232613863663134333035346133316262613838
          36646562323930396234326130363932623964343937326664386163306535393037323562373566
          33316264633566343965626436373931616564323730356337653330303038396435306534313037
          38616536343536346431396334316132646363396561346335383936323935313066326461356466
          66326439326535336331643831623636623161386138363039383061656465656232656463333266
          30393337623134626330646263353263656463616438353364386433363137636132353339376265
          31663261633564373863623061613634313739376134303234393638363630623835646430393235
          38376538623839643433393864326634313065336635633335306163623239346265313532666133
          63663230663538393332343930643139383737653030613364663136393332653366653330373363
          35393430373566353663653766393635386561393636653930656536656666643963383737303937
          39616164373535633165363530653030623164363762376336306135333133333730316333646263
          61363866366361366638363537646562356333336266613233363333383564643637373733343661
          63386664313533666362666438303037363962316338363866633563326664623939653731353038
          35333562303864663938636461353236336234646431376563633564313863623162303335353339
          35646561616363393833316433306630353233633761373434383561373536366430616439363465
          64656631663637633532393933313538393438383431386438333831643533353134363731633439
          38363362643533306261643261623132383439383463663066366337393938613739326663643562
          62663637313031633231366633353565396639346564303232353361316463646464643662656430
          32373338336535626231363937356662653761393861303132323864393739363636306535386236
          34626539366661363435386361336434326235633338633465663334356138323133303139356539
          35376530383561613631306165623664613937363937663561326231623161373063383134326232
          35356166636636626463616263333961383835323438663837666235373531653230613234363264
          65613634626266613831363132306164393162656361356330346362313062393030343330363338
          31356662366238323636363232616332663338396165393666653337646662376238343862626336
          62336666333466646366376164393962323062623865336561396461363433363733663238623830
          61643662373865633839386365663538373232303261383731623561646137646361333336646639
          61653336386434353435666634336439383834336235656237386664393332336666326331616336
          62616631613532653933613765656536313264373763346666353838646233326261383939663034
          35623766346434643961383538316366353038373866623334616637643030356338363965313662
          31383431343462636436393262663331616638653866373638336263306233636561346135633439
          39636534613564313039316339616532623334323637373863313733336437626431383232613430
          30353864343934336366356633643837633032363039393866633865643433393036313033636261
          33626330393263373162643036383265643234373539636333636532613436653163323663376133
          33366132613834616433323738636139636163363938346462653838633033636464336362343565
          30383331353138613966306364383563393939613438306265363036353161313938613532383739
          36343162356335363966646564623134323362383365623037666566636464623565386461383066
          37623635346366303563386133326265616439653761333564616333346162333130306266323764
          39663063313638613436623466356363396234626339323763333564343036346431653937303633
          31653565643733393764656635336466393665303031613062386164646237313764363633623364
          61626364313666663661303564396661663364393831373162396331643839386338656333666333
          61333437656237623965616462363265393839303832376639613334383664653735383839366164
          65346331623264333938303137376337666366643136653037313763393866303633626431636266
          63356130653638313838313033623533353930653161363839656131363235623761383131383131
          32323861623733383630643164366666353362356563323739653234306162333465656361343532
          31313439393437633531633063656135373561616466343234353231383639343636303133653965
          34316331356562343732363239666439343534636236646264333030663464336363646538343764
          33343833646434313736666530333235346333383439333961666162303438643265396465626361
          36623931353335663138343239306466366134633336643839343864386437656437373032633765
          36333635396433343162336461656136643433656135616662653965646564333565646533373335
          35356462653530643339333836376363313835396130326464326231346639366636383139313735
          38623138656664393564376138323637363932326138613764633064633966636231353861626630
          37343566613735373039616432313439393330666432393463393938353937613863663362623461
          33656265383066653462656162303731326365666461306336393835626235323531306435356435
          37646639656663333139393431326436653661643134303135653436643433353036653132336132
          64363330353531363637383434643862336464346563656538306237333933626164343561383832
          66313231333038666632666334343264323663633931383561383038303161333136313937376534
          34643134333234646166383361643231633937323861353963353431613238353465363431313232
          61383566623461363262666437363439323330383134303162626331613661343463386465303166
          32383831616566303238333731383830383433323734643366313039653166666566376661373230
          39643939386533343266643063363331336534396662626533626566613131636263663834616334
          65316137323235613439623866633563326239396237353263653732363230386435313363396363
          66633639353261316564343332646562326136653332623766376235656239386564336431323533
          34323937323365306364396339613637653332323238656233393237336661613063326638316164
          39366639376162303538313837633531343862343161653037353338336461366139383363316164
          36383235376234653262396466376639333362386237633134663062646130306432323764386639
          39303361393864323435646661333031373230646439643138303631326330623565616633633439
          64643836313631343463666566386235316436343239613262633262373339393938313237623933
          35313334643465353730336364643535643361343165393837373039383836653066353665623538
          33626533623937663666316535643438373763343231313737386634653838643637653533326661
          65343230356362393531636635356565313634663465386662396635366162663663623733316431
          64666430373064333662353338336538366566616337303063623639336463386333616138303466
          31346166343430313066626264343139383633303136643233323266396331333633646232353266
          64366261666338313836643262653965316433353163363733333866656261393733663735363162
          38373365396266313136653532346665313133656564643832313133396230653462646138636361
          64646430343866343766303536633837326235356463386334393164643739306661346434323236
          38643237303438356262643435373733326430366261636261303565333832396434316137373361
          61386365383961363439396237326465373039353631303936653666356535313564636539636531
          61666230613161646161323666386661636439306539316239346138303665623039363263626130
          66363338323265306235393437346666623263646336356236316430353666373230633332623863
          38613466353430316232376636303332633965326131633966643938323761306265643537326366
          38326465373331666264663563343636353937373136623934363838313761643038653764643864
          38653763663261353938316162623434653165623734613462363835316664656463373665663963
          37646262663635366231383963383066376665633533633333363666613134663635623461303930
          64313837636463313234313762303934333663623633346232363961303636303266303630363965
          62326261363539616166323763373838323035333531666638323235306139363366323432303433
          34613331313034366131333537346334633734656436666531633633653231333762313336643463
          34666235626536313535653635336135383234383233623661373538626432386237343932613164
          34366166373435356338323866333663643934376364666165303461343466303935356362363037
          33333235363534663536363366363132363830333335326432303138353562613033343661383166
          33336435623462333461343239616638386632653261336634333365303062363066323137323830
          38653362316637656532366539653036666634633337313133626230313264313230363831343661
          35376665313135626366666538366565303739636132663230383635663136653839363765366134
          33616363383863663034393731363738306332353531386637303037663530333330656462376132
          37636164323765396562333632396434366337373737626131666566323266306364356461633063
          63636165666634343262376664633437636662346139383162336632633063626361343066333738
          31376435313639396261616666383061393732306266323433623131396139663666343436393534
          30613732393139333861386662633234393231666562353561393935313566316265386538663966
          34373439663163626636666363336165353666363737663731326461663439383831376263363633
          62623966303866363164306665366434393665643935376165303132393438326663613633373365
          31306236616363653233376161626231326432323233303337616462633232313463346430386532
          66323238653739396265633434313739376162653632376434396638376662386238326637303039
          33623237306238646334366135343664643630653038353730393366376235316431613133363437
          38653035653963326331313134313332656632333534373362356366653261343838393961373239
          63613564626130373666356138383766393465636463623933646130383961616465306139613431
          35616263323936343764386431333362666666636437623639613437633630636563306639623731
          39353965633032303931663536373363393562656638626462353963306563363338376637636662
          32633932306163353439633464383561316533393436633236376234653535363562373436346236
          39636265613766653034323039383964623365373162376366643233616562636166643639306238
          36663339363962633863316431376166323738393036633332353539363561643231636461383766
          35336135663635306365666166663732336239306537353135353130623632356631656464303064
          38653635313564396433623962326666373463663162363565313265376232333765366464626361
          37663130353565636565376330623432616338316138343636363066326264373735653362353933
          36653330343161636137376364666465623036643535353233356238396138623762323537613434
          35356366373031656664633364316239353066373231363730343163613635343030356564383330
          61386463343731323764616132383638613831633262333237666437366639313866636537323537
          36616133646232353161303566656336323465353462323366616463656230383065613333666333
          35623936363036323166393036333932343338396230633231323535336534663834343836333936
          32653961393938343135623262396234386361306466323262663365346239313934663232393739
          62336265376266666261646537326534383638613235613266643137636639383134393764363137
          64303535393166636539336236613735623738313932343963666132376665343734656664393336
          35356661396365363433353363656132383132363335343038303739396533306138363337613835
          33366465346534346331643161316564323066333461323537346131383962333565613631323961
          31653233323131663436336632373037343333303431336462613662633937653531393331353037
          30376264333537383130343262356630356663373036613633343638656663316466613766363134
          34323563333436333465656130383435393837623764323064623530623362326338613165633839
          34313630336161343863383337626266353534643239396564383035363761336336316364653933
          64623631623034393766393166336663316432383464616135643261356433373862363031353861
          33303862343934636434346136616638373864306438393934336136323965656435613239373836
          37646139626264373839626136393231346635646634633037303336353037393939666636656238
          64646330336461646662366537376661656538326531393162653537303638303631616265383936
          30613931306234353763636531333733333361663465313031376230376436363634346231373034
          62626131383864643039656631356638363939623465393162613664613666656635393666613031
          33613232336337326565646565653633656462633231363766303835373663353637656138376462
          33633939653031613237326466343934633431613234303637373430343965326332366666326334
          64623134663134633733616333393839326531633532363261633231316238353837366364333639
          35356663663339343831343163343465333032653835633938313733613366326666323132663131
          33363337393032643464343736323836613437323439646265313039663837373063343131623936
          39346263646133643639333230356533656636386465353335333965303239383835303262356339
          34643264333732666564623937333631363766343834633536643137633935616636666231613831
          30633639626639306338333738633262333331366665313161333434386230313831306339343033
          66343062386563316466643531353935353934383035623038356562313366303536636663373336
          34653435373631383162363036646364643431326661383138326432323232373838656130613365
          34633036316438336262363462626366323363316439363163323463373564303963303830653564
          33356631396632353031383162306336383536363733393263613265376636323833336538373730
          64626231303036323163353162316164393362306532376239313164326134393734626230383563
          37333534393832393535336635316636313966666535633035323036346565643939353638373831
          38373232363834373538323364333861393832306464623430363637323563316666636430613238
          33663866663632363762386233623765353137393338393064356532376235663464346435653931
          37373130336265303365313661663939346334373336646539336336613761383135373761323164
          66646231633561323739363062623030623739643635663164363733353639333762613432346233
          31383830336566303632653437636462306430306633396334613336343735663263386333613634
          63316631343332656565386339396234326663636162616438376234643361376131333661353465
          38346234623532306531663265303132656233613862373739616435613362336630343630633134
          33383636323332623935613732366166653437333534343538383163383635636636356333323362
          37653733396231633362333137313339653366623035313331323362666133656630326534633738
          65343563636363666363326437613331396232396463356430613838633163393330323566353465
          32313435343634386163376333323439393634326433333964626332376339616561663561353961
          31333338636364373632383039396366633662313835373034633863633266343835623236386337
          30626330393062643066303131383936643630666237393233616435393864356331366262373536
          36363462386536326536653638346164343532383263633462646533383563386539666137366662
          38383832383865643033663866383538386339396239623639376163626462633737303266636262
          38303066336238366665663963343062356438323030303035626465396162656131646662393732
          39626533386165366637656433633562666536613863323335313033353963346263346636373361
          3934

# Path to a CA certificate file to use for the OS_CACERT environment variable in
# openrc files when TLS is enabled, instead of Kolla-Ansible's default.
#kolla_external_fqdn_cacert:

###############################################################################
# Dummy variable to allow Ansible to accept this file.
workaround_ansible_issue_8743: yes
